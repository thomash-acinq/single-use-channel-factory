digraph T {
  rankdir=LR;
  node [shape=box];
  alice0 [label="Alice"];
  alice1 [label="Alice"];
  alice2 [label="Alice"];
  alice3 [label="Alice"];
  bob0 [label="Bob"];
  bob1 [label="Bob"];
  bob2 [label="Bob"];
  bob3 [label="Bob"];
  carol0 [label="Carol"];
  carol1 [label="Carol"];
  carol2 [label="Carol"];
  carol3 [label="Carol"];
  alice_bob_carol [label="Alice & Bob & Carol"];
  alice_bob [label="Alice & Bob"];
  alice_carol [label="Alice & Carol"];
  bob_carol [label="Bob & Carol"];
  node [shape=point];
  commitment_ab [color=red];
  commitment_ac [color=red];
  commitment_bc [color=red];
  edge [tailport=e, headport=w];
  alice0 -> hook [arrowhead=none];
  bob0 -> hook [arrowhead=none];
  carol0 -> hook [arrowhead=none];
  hook -> alice_bob_carol;
  edge [style=dotted];
  alice_bob_carol -> allocation [arrowhead=none];
  allocation -> alice_bob;
  allocation -> alice_carol;
  allocation -> bob_carol;
  edge [color=red];
  alice_bob -> commitment_ab [arrowhead=none];
  commitment_ab -> alice1;
  commitment_ab -> bob1;
  alice_carol -> commitment_ac [arrowhead=none];
  commitment_ac -> alice2;
  commitment_ac -> carol1;
  bob_carol -> commitment_bc [arrowhead=none];
  commitment_bc -> bob2;
  commitment_bc -> carol2;
  edge [style=solid, color=black];
  alice_bob_carol -> settlement [arrowhead=none];
  settlement -> alice3;
  settlement -> bob3;
  settlement -> carol3;
}
